<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Сокобан</title>
    <link rel="icon" type="image/svg+xml" href="./img/favicon.ico">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/data.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wdth,wght@75,300&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script>
        var levelNullCheck = window.localStorage.getItem("currentLevel");
        if (levelNullCheck === null) window.localStorage.setItem("currentLevel", "01");
        var hardcoreNullCheck = window.localStorage.getItem("hardcoreMode");
        if (hardcoreNullCheck === null) window.localStorage.setItem("hardcoreMode", "false");
    </script>

    <script type="text/javascript" src="./js/utils.js"></script>
    <script type="text/javascript" src="./js/sokoban.js"></script>
</head>

<body onload="checkPageMode()">

    <div class="main-page-text">

        <div class="tooltip" style="width: 300px; justify-content: center;">
            <button type="button" onclick="homeLink()">СОКОБАН</button>
        </div>    

        <div class="tooltip" style="width: 34px; justify-content: center;">
            <button id="myBtn">
                <svg style="width:30px;height:30px" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20,4C21.11,4 22,4.89 22,6V18C22,19.11 21.11,20 20,20H4C2.89,20 2,19.11 2,18V6C2,4.89 2.89,4 4,4H20M8.5,15V9H7.25V12.5L4.75,9H3.5V15H4.75V11.5L7.3,15H8.5M13.5,10.26V9H9.5V15H13.5V13.75H11V12.64H13.5V11.38H11V10.26H13.5M20.5,14V9H19.25V13.5H18.13V10H16.88V13.5H15.75V9H14.5V14A1,1 0 0,0 15.5,15H19.5A1,1 0 0,0 20.5,14Z" /></svg>
                <span class="tooltiptext">Що нового</span>
            </button>
        </div>

        <div class="tooltip" style="width: 36px; justify-content: center;">
            <button type="button" onclick="restartLevel()">
                <svg style="width:30px;height:30px" viewBox="0 0 24 24">
                <path fill="#333" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" /></svg>
                <span class="tooltiptext">Спробувати знову</span>
            </button>
        </div>

        <div class="tooltip" style="width: 226px; justify-content: center;">
            <button class= "btn" onclick="changePageMode()">
                <svg class ="btn__img btn__img_dark" style="width:30px;height:30px" viewBox="0 3 24 24">
                <path fill="currentColor" d="M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M17,15A3,3 0 0,1 14,12A3,3 0 0,1 17,9A3,3 0 0,1 20,12A3,3 0 0,1 17,15Z" /></svg>
                <svg class ="btn__img btn__img_light" style="width:30px;height:30px" viewBox="0 3 24 24">
                <path fill="currentColor" d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></svg>
                <span class="tooltiptext">Темний режим</span>
            </button>
        </div>

        <div class="tooltip" style="width: 26px; justify-content: center;">
            <button class= "btn" onclick="changeHardcoreMode()">
                <svg class ="btn__hardcore btn__hardcore_disabled" style="width:26px;height:26px" viewBox="0 2 24 24">
                <path fill="currentColor" d="M12,2A9,9 0 0,0 3,11C3,14.03 4.53,16.82 7,18.47V22H9V19H11V22H13V19H15V22H17V18.46C19.47,16.81 21,14 21,11A9,9 0 0,0 12,2M8,11A2,2 0 0,1 10,13A2,2 0 0,1 8,15A2,2 0 0,1 6,13A2,2 0 0,1 8,11M16,11A2,2 0 0,1 18,13A2,2 0 0,1 16,15A2,2 0 0,1 14,13A2,2 0 0,1 16,11M12,14L13.5,17H10.5L12,14Z" /></svg>
                <svg class ="btn__hardcore btn__hardcore_enabled" style="width:26px;height:26px" viewBox="0 1 24 24">
                <path fill="currentColor" d="M3,13A9,9 0 0,0 12,22C12,17 7.97,13 3,13M12,5.5A2.5,2.5 0 0,1 14.5,8A2.5,2.5 0 0,1 12,10.5A2.5,2.5 0 0,1 9.5,8A2.5,2.5 0 0,1 12,5.5M5.6,10.25A2.5,2.5 0 0,0 8.1,12.75C8.63,12.75 9.12,12.58 9.5,12.31C9.5,12.37 9.5,12.43 9.5,12.5A2.5,2.5 0 0,0 12,15A2.5,2.5 0 0,0 14.5,12.5C14.5,12.43 14.5,12.37 14.5,12.31C14.88,12.58 15.37,12.75 15.9,12.75C17.28,12.75 18.4,11.63 18.4,10.25C18.4,9.25 17.81,8.4 16.97,8C17.81,7.6 18.4,6.74 18.4,5.75C18.4,4.37 17.28,3.25 15.9,3.25C15.37,3.25 14.88,3.41 14.5,3.69C14.5,3.63 14.5,3.56 14.5,3.5A2.5,2.5 0 0,0 12,1A2.5,2.5 0 0,0 9.5,3.5C9.5,3.56 9.5,3.63 9.5,3.69C9.12,3.41 8.63,3.25 8.1,3.25A2.5,2.5 0 0,0 5.6,5.75C5.6,6.74 6.19,7.6 7.03,8C6.19,8.4 5.6,9.25 5.6,10.25M12,22A9,9 0 0,0 21,13C16,13 12,17 12,22Z" /></svg>
                <span class="tooltiptext">Ускладнений режим</span>
            </button>
        </div>

        <div class="tooltip" style="width: 40px; justify-content: center;">
            <button type="button" onclick="resetProgress()">
                <svg style="width:26px;height:26px" viewBox="0 2 24 24">
                <path fill="currentColor" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M17,7H14.5L13.5,6H10.5L9.5,7H7V9H17V7M9,18H15A1,1 0 0,0 16,17V10H8V17A1,1 0 0,0 9,18Z" /></svg>
                <span class="tooltiptext">Обнулити прогрес</span>
            </button>
        </div>

        <button>
            <script>document.write(window.localStorage.getItem("currentLevel"));</script>
        </button>
        
        </div>
    </div>

    <div class="main">
        <div class="main-page-text">
            Сокобан (Soko-Ban, яп. 倉庫番 - «комірний») - логічна гра-головоломка, в якій гравець пересуває ящики по лабіринту, показаному у вигляді плану, з метою поставити всі ящики на задані кінцеві позиції. Тільки один ящик може бути пересунутий за раз, причому герой гри - «комірний» - може тільки штовхати ящики, але не тягнути їх. Оскільки гру досить складно відтворити фізично, зазвичай вона реалізується у вигляді комп'ютерної гри.<br>
            Sokoban була створена в 1981 році Хіроюкі Імабаясі, і видана в 1982 році японською компанією Thinking Rabbit. Крім того, компанія випустила три сиквела: Boxxle, Sokoban Perfect і Sokoban Revenge.<br>
            Гра була реалізована для безлічі комп'ютерних платформ, включаючи практично всі домашні та персональні комп'ютери. Також існують версії гри для кишенькових комп'ютерів, ігрових приставок, цифрових фотоапаратів, мобільних телефонів і телевізорів.
        </div>
    </div>

    <div class="main">
        <div class="main-page-text-center">
            <br>
            <button type="button" onclick="startLevel()">ПОЧАТИ ГРУ</button>
            <br>
            <script>
                document.write("ПОТОЧНИЙ РІВЕНЬ: " + window.localStorage.getItem("currentLevel"));
            </script>
        </div>
    </div>
 
    <div class="level-wrapper">
        <script>
            var divId = `level${window.localStorage.getItem("currentLevel")}`;
            var sokolevId = "sokolevel()";
            document.writeln('<div class="levelConstructor" id="' + divId + '"></div>');
            document.writeln('<script type="text/javascript">' + sokolevId + '<' + '/script>');
        </script>
    </div>

    <div id="myModal" class="modal"> 
    <div class="modal-content">
        <span class="close">&times;</span>
            <strong>ВЕРСІЯ 1.1 </strong>
                <br>- "Крок назад" - відміни останній хід за допомогою клавіші "Пробіл"
                <br>- Новий "Ускладнений режим", жодних ходів назад
                <br>- Ще 20 нових рівнів! Кількість рівнів зросла до 50!
                <br>- Виправлено декілька помилок та оптимізовано код
                <br><br>
            <strong>ВЕРСІЯ 1.0 </strong>
                <br>- Перший офіційний реліз!
                <br>- Створено перших 30 рівнів, далі буде
                <br>- Збереження прогресу проходження після закриття сторінки
                <br>- Додано функцію обнулення прогресу. Почніть усе спочатку!
                <br>- Додано "Темний режим" сторінки та відповідний перемикач для його активації
        </div>
    </div>

    <script>
        var modal = document.getElementById("myModal");
        var btn = document.getElementById("myBtn");                 // button that opens modal
        var span = document.getElementsByClassName("close")[0];     // span element to close modal
        btn.onclick = function() { modal.style.display = "block"; } // push the button to open modal 
        span.onclick = function() { modal.style.display = "none";}  // click on (x) to close modal
        window.onclick = function(event)                            // close when click outside
        { if (event.target == modal) {modal.style.display = "none";} }
    </script>          

</body>
</html>
